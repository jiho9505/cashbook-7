(()=>{"use strict";var t={965:(t,e,a)=>{a.r(e)},403:(t,e,a)=>{a.r(e)},194:(t,e,a)=>{a.r(e)},102:(t,e,a)=>{a.r(e)},1:(t,e,a)=>{a.r(e)},940:(t,e,a)=>{a.r(e)},164:(t,e,a)=>{a.r(e)},733:(t,e,a)=>{a.r(e)},924:(t,e,a)=>{a.r(e)},219:(t,e,a)=>{a.r(e)},681:(t,e,a)=>{a.r(e)},17:(t,e,a)=>{a.r(e)},650:(t,e,a)=>{a.r(e)},104:(t,e,a)=>{a.r(e)},541:(t,e,a)=>{a.r(e)},51:(t,e,a)=>{a.r(e)},67:(t,e,a)=>{a.r(e)},741:(t,e,a)=>{a.r(e)},682:(t,e,a)=>{Object.defineProperty(e,"__esModule",{value:!0});const n=a(923),r=a(296),o=a(973),i=a(984),s=a(916),c=a(808),d=a(483);e.default=class{constructor(){new r.default,new o.default,new c.default,new s.default,new i.default,new d.default,window.addEventListener("popstate",(t=>{null!==t.state&&n.default.fire("statepop",t.state)})),n.default.subscribe("statechange",(t=>{this.stateChangeHandler({state:t.detail})}))}stateChangeHandler(t){history.pushState(t.state,"",t.state.path)}}},983:function(t,e){var a=this&&this.__awaiter||function(t,e,a,n){return new(a||(a=Promise))((function(r,o){function i(t){try{c(n.next(t))}catch(t){o(t)}}function s(t){try{c(n.throw(t))}catch(t){o(t)}}function c(t){var e;t.done?r(t.value):(e=t.value,e instanceof a?e:new a((function(t){t(e)}))).then(i,s)}c((n=n.apply(t,e||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0}),e.api=void 0;const n="http://13.125.6.141:8080/api";e.api={get:(t,e="")=>a(void 0,void 0,void 0,(function*(){try{return{success:!0,data:yield((t,e)=>a(void 0,void 0,void 0,(function*(){try{const a=yield fetch(`${n}${t}`,{method:"GET",headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"}});if(!a.ok)throw new Error("error occur");return yield a.json()}catch(t){throw t}})))(t,e)}}catch(t){return{success:!1,message:t}}})),post:(t,e,r)=>a(void 0,void 0,void 0,(function*(){try{return{success:!0,data:yield((t,e,r)=>a(void 0,void 0,void 0,(function*(){try{const a=yield fetch(`${n}${t}`,{method:"POST",body:JSON.stringify(e),headers:{Authorization:`Bearer ${r}`,"Content-Type":"application/json"}});if(!a.ok)throw new Error("error occur");return yield a.json()}catch(t){throw t}})))(t,e,r)}}catch(t){return{success:!1,message:t}}})),delete:(t,e)=>a(void 0,void 0,void 0,(function*(){try{return{success:!0,data:yield((t,e)=>a(void 0,void 0,void 0,(function*(){try{const a=yield fetch(`${n}${t}`,{method:"DELETE",headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"}});if(!a.ok)throw new Error("error occur");return yield a.json()}catch(t){throw t}})))(t,e)}}catch(t){return{success:!1,message:t}}}))}},554:function(t,e,a){var n=this&&this.__awaiter||function(t,e,a,n){return new(a||(a=Promise))((function(r,o){function i(t){try{c(n.next(t))}catch(t){o(t)}}function s(t){try{c(n.throw(t))}catch(t){o(t)}}function c(t){var e;t.done?r(t.value):(e=t.value,e instanceof a?e:new a((function(t){t(e)}))).then(i,s)}c((n=n.apply(t,e||[])).next())}))},r=this&&this.__rest||function(t,e){var a={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(a[n]=t[n]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(t);r<n.length;r++)e.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(t,n[r])&&(a[n[r]]=t[n[r]])}return a};Object.defineProperty(e,"__esModule",{value:!0});const o=a(923),i=a(983);e.default=class{constructor(){this.store={year:(new Date).getFullYear(),month:(new Date).getMonth()+1,isLoggedIn:!1,accessToken:""},this.filter={category:"",type:"",day:"",card:""},o.default.subscribe("statepop",this.statePop.bind(this)),o.default.subscribe("requestGithubLogin",this.requestGithubLogin.bind(this)),o.default.subscribe("statechange",this.fetchData.bind(this)),o.default.subscribe("storeupdated",this.storeData.bind(this)),o.default.subscribe("createaccounthistory",this.createAccountHistory.bind(this)),o.default.subscribe("filterchange",this.fetchFilterdData.bind(this)),o.default.subscribe("deleteaboutaccount",this.deleteAboutAccount.bind(this))}statePop(t){const{path:e}=t.detail;if("/"!==e&&!this.store.isLoggedIn)return history.replaceState(null,"","/");o.default.fire("storeupdated",{state:Object.assign(Object.assign({},t.detail),{path:e})})}requestGithubLogin(){window.location.href="https://github.com/login/oauth/authorize?client_id=742ffcd3fc9e4708fccc"}deleteAboutAccount(t){return n(this,void 0,void 0,(function*(){yield i.api.delete(`/account-history?id=${t.detail.id}`,this.store.accessToken),o.default.fire("storeupdated",{state:history.state,filter:this.filter})}))}fetchFilterdData(t){const e=t.detail;this.filter=Object.assign(Object.assign({},this.filter),e),o.default.fire("storeupdated",{state:history.state,filter:this.filter})}storeData(t){const e=t.detail.state,{path:a}=e,n=r(e,["path"]);this.store=Object.assign(Object.assign({},this.store),n)}fetchData(t){const{month:e,year:a}=this.store;o.default.fire("storeupdated",{state:Object.assign(Object.assign({},t.detail),{month:e,year:a})})}createAccountHistory(t){return n(this,void 0,void 0,(function*(){try{yield i.api.post("/account-history",t.detail.submitArguments,t.detail.state.accessToken),o.default.fire("storeupdated",{state:t.detail.state})}catch(t){alert(t)}}))}}},395:(t,e,a)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.CardsForModal=e.objToChangeCardEnglishNameToNum=e.objToChangeCardNameFromKoreanToEng=e.objToChangeCategoryEnglishNameToNum=e.objToChangeCategoryNameFromKoreanToEng=e.initFilterData=e.initHistoryData=e.payMethodNameList=e.categoryList=e.NAME_BY_CATEGORY=e.COLORS_BY_CATEGORY=e.PICTOGRAM=e.matchCategoryAndImg=e.PATHS=e.newStoreData=e.initStoreData=void 0;const n=a(8);e.initStoreData={path:"/",isLoggedIn:!1},e.newStoreData={path:"/account",year:(new Date).getFullYear(),month:(new Date).getMonth()+1,isLoggedIn:!0},e.PATHS=[["/account",n.Account],["/statistics",n.Statistic],["/calendar",n.Calendar]],e.matchCategoryAndImg={"문화/여가":n.CULTURE,기타:n.ETC,"의료/건강":n.HEALTH,식비:n.FOOD,교통:n.TRAFFIC,"쇼핑/뷰티":n.SHOPPING,생활:n.LIFE,수입:n.INCOME},e.PICTOGRAM={culture:n.CULTURE,etc:n.ETC,food:n.FOOD,health:n.HEALTH,life:n.LIFE,shopping:n.SHOPPING,traffic:n.TRAFFIC,income:n.INCOME},e.COLORS_BY_CATEGORY={culture:"#833471",etc:"#9980FA",food:"#A3CB38",health:"#12CBC4",life:"#5758BB",shopping:"#FFC312",traffic:"#006266",income:"#1289A7"},e.NAME_BY_CATEGORY={culture:"문화/여가",etc:"기타",food:"식비",health:"의료/건강",life:"생활",shopping:"쇼핑/뷰티",traffic:"교통",income:"수입"},e.categoryList=["문화/여가","기타","식비","의료/건강","생활","쇼핑/뷰티","교통","수입"],e.payMethodNameList=["신한카드","우리카드","카카오뱅크","롯데카드","현대카드","삼성카드","현금","기타"],e.initHistoryData={income:"",expenditure:"",detail:[{id:"",price:"",createdAt:"",category:"",payMethod:"",content:""}]},e.initFilterData={category:"",type:"",day:"",card:0},e.objToChangeCategoryNameFromKoreanToEng={"문화/여가":"culture",식비:"food","의료/건강":"health",생활:"life","쇼핑/뷰티":"shopping",교통:"traffic",기타:"etc",수입:"income"},e.objToChangeCategoryEnglishNameToNum={culture:0,food:2,health:3,life:4,shopping:5,traffic:6,etc:1,income:7},e.objToChangeCardNameFromKoreanToEng={카카오뱅크:"kakao",신한카드:"shinhan",현금:"money",우리카드:"woori",롯데카드:"lotte",삼성카드:"samsung",현대카드:"hyundai",기타:"etc"},e.objToChangeCardEnglishNameToNum={shinhan:0,woori:1,kakao:2,lotte:3,hyundai:4,samsung:5,money:6,etc:7},e.CardsForModal=[{payMethodName:"신한카드",payMethodMoney:""},{payMethodName:"우리카드",payMethodMoney:""},{payMethodName:"카카오뱅크",payMethodMoney:""},{payMethodName:"롯데카드",payMethodMoney:""},{payMethodName:"현대카드",payMethodMoney:""},{payMethodName:"삼성카드",payMethodMoney:""},{payMethodName:"현금",payMethodMoney:""},{payMethodName:"기타",payMethodMoney:""}]},8:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.IncomeIcon=e.ExpenditureIcon=e.LoginLogo=e.GithubIcon=e.LoginBg=e.TrashCan=e.CheckNonActive=e.CheckActive=e.Xbox=e.Option=e.CheckButton=e.INCOME=e.TRAFFIC=e.SHOPPING=e.LIFE=e.HEALTH=e.FOOD=e.ETC=e.CULTURE=e.Statistic=e.SimplifiedLogo=e.MonthControlImage=e.Logout=e.Calendar=e.DownArrow=e.Arrow=e.Account=void 0;const a="https://cashbook-7.s3.ap-northeast-2.amazonaws.com/";e.Account=a+"header/account.svg",e.Arrow=a+"header/arrow.svg",e.DownArrow=a+"header/arrow.svg",e.Calendar=a+"header/calendar.svg",e.Logout=a+"header/logout.svg",e.MonthControlImage=a+"header/month-controller.svg",e.SimplifiedLogo=a+"header/simplified-logo.svg",e.Statistic=a+"header/statistic.svg",e.CULTURE=a+"category/culture.svg",e.ETC=a+"category/etc.svg",e.FOOD=a+"category/food.svg",e.HEALTH=a+"category/health.svg",e.LIFE=a+"category/life.svg",e.SHOPPING=a+"category/shopping.svg",e.TRAFFIC=a+"category/traffic.svg",e.INCOME=a+"category/income.svg",e.CheckButton=a+"checkbutton.svg",e.Option=a+"option.svg",e.Xbox=a+"xbox.svg",e.CheckActive=a+"checkActive.svg",e.CheckNonActive=a+"checkNonActive.svg",e.TrashCan=a+"trashcan.svg",e.LoginBg=a+"login/login-bg.svg",e.GithubIcon=a+"login/github.svg",e.LoginLogo=a+"loginPageLogo.svg",e.ExpenditureIcon=a+"calendar/expenditure.svg",e.IncomeIcon=a+"calendar/income.svg"},923:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.default={fire:(t,e)=>{document.dispatchEvent(new CustomEvent(t,{detail:e}))},subscribe:(t,e)=>{document.addEventListener(t,e)}}},33:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.formatDateAsTwoLetters=e.formatDataIntoWon=e.removeValueOnLocalStorage=e.getValueOnLocalStorage=e.setValueOnLocalStorage=e.removeActiveAttributeOnClass=e.createDOMWithSelector=e.changeIntoDateFormat=e.$=e.monthText=void 0,e.monthText={1:"Jan",2:"Feb",3:"Mar",4:"Apr",5:"May",6:"Jun",7:"Jul",8:"Aug",9:"Sep",10:"Oct",11:"Nov",12:"Dec"},e.$=(t,e=document)=>e.querySelector(t),e.changeIntoDateFormat=t=>{const a=new Date(t),n=a.getMonth()+1,r=a.getDate(),o=a.getHours(),i=o<=12?o:o-12,s=a.getMinutes();return`${n}월 ${r}일, ${e.formatDateAsTwoLetters(i)}:${s} ${o<12?"am":"pm"}`},e.createDOMWithSelector=(t,...e)=>{const a=document.createElement(t);return e.forEach((t=>{"#"===t[0]&&(a.id=t.slice(1)),"."===t[0]&&a.classList.add(t.slice(1))})),a},e.removeActiveAttributeOnClass=(t,e,a)=>{[...e.querySelectorAll(a)].forEach(((e,a)=>{a!==t&&e.classList.remove("active")}))},e.setValueOnLocalStorage=(t,e)=>{let a=JSON.stringify(e);localStorage.setItem(t,a)},e.getValueOnLocalStorage=t=>{let e=localStorage.getItem(t);return JSON.parse(e)},e.removeValueOnLocalStorage=t=>{localStorage.removeItem(t)},e.formatDataIntoWon=t=>new Intl.NumberFormat("kr-KR",{style:"currency",currency:"KRW"}).format(t),e.formatDateAsTwoLetters=t=>t.toString().padStart(2,"0")},6:(t,e,a)=>{Object.defineProperty(e,"__esModule",{value:!0}),a(403);const n=a(33);e.default=class{constructor({onClickConfirmWindowHandler:t,addText:e}){this.$confirm=n.createDOMWithSelector("div",".confirm"),this.addedText=e,this.render(),n.$("#root").appendChild(this.$confirm),this.onClickConfirmWindowHandler=t,this.$confirm.addEventListener("click",(t=>{this.onClickConfirmWindowHandler(t)}))}render(){this.$confirm.innerHTML=`\n        <div class="confirm__overlay"></div>\n        ${this.createConfirmWindow()}\n      \n    `}createConfirmWindow(){return`\n        <div class="confirm__content">\n            <span class="confirm__guide">정말로 삭제하시겠습니까?</span>\n            <span class="confirm__add-text">${this.addedText}</span>\n            <div class="confirm__check-one">\n                <span class="confirm__cancel">취소</span><span class="confirm__delete">삭제</span>\n            </div>\n        </div>\n      `}}},182:(t,e,a)=>{Object.defineProperty(e,"__esModule",{value:!0});const n=a(8),r=a(923),o=a(33);a(194),e.default=class{constructor(t,e){this.$monthController=o.createDOMWithSelector("div",".header__month-controller"),o.$("header").appendChild(this.$monthController),this.currentYear=t,this.currentMonth=e,this.render(),o.$(".arrow-wrapper").addEventListener("click",(t=>{t.target instanceof HTMLElement&&(t.target.closest(".upper-arrow")&&this.changeMonth("up"),t.target.closest(".down-arrow")&&this.changeMonth("down"))}))}changeMonth(t){let e=this.currentYear,a=this.currentMonth;"up"===t&&12===this.currentMonth&&(e=this.currentYear+1,a=1),"up"===t&&12!==this.currentMonth&&(a=this.currentMonth+1),"down"===t&&1===this.currentMonth&&(e=this.currentYear-1,a=12),"down"===t&&1!==this.currentMonth&&(a=this.currentMonth-1),r.default.fire("storeupdated",{state:Object.assign(Object.assign({},history.state),{year:e,month:a})})}render(){this.$monthController.innerHTML=`\n        ${this.getCalenderSVG()}\n        ${this.getArrowSVG()}\n    `}getCalenderSVG(){const t=o.createDOMWithSelector("div",".calendar-wrapper");return t.innerHTML=`\n        <img src=${n.MonthControlImage}>\n        <span class='calendar-wrapper__month'>${o.monthText[this.currentMonth]}</span>\n        <span class='calendar-wrapper__year'>${this.currentYear}</span>\n    `,t.outerHTML}getArrowSVG(){const t=o.createDOMWithSelector("ul",".arrow-wrapper");return t.innerHTML=`\n        <li class='upper-arrow'><img src=${n.Arrow}></li>\n        <li class='down-arrow'><img src=${n.Arrow}></li>\n      `,t.outerHTML}}},296:(t,e,a)=>{Object.defineProperty(e,"__esModule",{value:!0});const n=a(395),r=a(8),o=a(923),i=a(33);a(102);const s=a(182);e.default=class{constructor(){o.default.subscribe("storeupdated",(t=>{const{path:e,year:a,month:n}=t.detail.state;this.currentPath=e,this.currentYear=a,this.currentMonth=n,this.render()})),i.$("header").addEventListener("click",this.onClickNavItem)}onClickNavItem(t){t.preventDefault();const{target:e}=t;if(!(e instanceof HTMLElement))return;e.closest(".nav__logout-btn")&&(i.removeValueOnLocalStorage("refreshToken"),o.default.fire("statechange",Object.assign(Object.assign({},history.state),{path:"/",isLoggedIn:!1})));const a=e.closest("a");if(!a)return;const n=a.getAttribute("href");o.default.fire("statechange",Object.assign(Object.assign({},history.state),{path:n}))}render(){i.$("header").innerHTML=`\n      ${this.getHeaderLogoDOM()}\n      <nav class="header__nav">\n        <ul>\n          ${this.getLiDOMs(this.currentPath)}\n          <li class='nav__logout-btn'><img src=${r.Logout}></li>\n        </ul>\n      </nav>\n    `,new s.default(this.currentYear,this.currentMonth)}getHeaderLogoDOM(){const t=i.createDOMWithSelector("div",".header__logo"),e=i.createDOMWithSelector("img");return e.setAttribute("src",`${r.SimplifiedLogo}`),t.appendChild(e),t.outerHTML}getLiDOMs(t){return n.PATHS.reduce(((e,[a,n])=>[...e,this.getLiDOM(a,n,t)]),[]).join("")}getLiDOM(t,e,a){const n=`header__${t.slice(1)}${t===a?" active":""}`;return`\n      <li>\n        <a href=${t} class='${n}'>\n          <img src=${e}>\n        </a>\n      </li>\n    `}}},600:(t,e,a)=>{Object.defineProperty(e,"__esModule",{value:!0});const n=a(395),r=a(923),o=a(8);a(1);const i=a(33),s=a(6);e.default=class{constructor({parent:t,state:e,filter:a}){this.mode="Account",t===i.$(".history-form__pay-method")&&(this.mode="historyModal"),this.PayWrapper=i.createDOMWithSelector("div",".payWrapper"),t.appendChild(this.PayWrapper),this.setProperty(e,a),this.render(),this.currentMode=document.querySelector("#"+this.mode),this.currentMode.addEventListener("click",this.onClickHandler.bind(this))}setProperty(t,e){this.state=t,this.filter=e}render(){this.PayWrapper.innerHTML=`\n        ${this.createPayMethod()}\n        `}onClickHandler(t){this.onClickCardChoice(t),this.onClickXbox(t)}onClickXbox(t){const{target:e}=t;e instanceof HTMLElement&&"card-xbox-img"===e.className&&new s.default({onClickConfirmWindowHandler:this.onClickConfirmWindowHandler.bind(this),addText:"( 삭제 시 내역 데이터도 삭제됩니다❗️)"})}onClickConfirmWindowHandler(t){const{target:e}=t;e instanceof HTMLElement&&(["confirm__overlay","confirm__cancel"].includes(e.className)?i.$("#root").removeChild(i.$(".confirm")):"confirm__delete"===e.className&&(i.$("#root").removeChild(i.$(".confirm")),r.default.fire("deleteaboutaccount",{})))}onClickCardChoice(t){const{target:e}=t;if(e instanceof HTMLElement&&"card"===e.id){const t=Number(e.dataset.idx),a=e.querySelector("#checkbutton");a.classList.contains("active")?(a.classList.remove("active"),this.currentCardIdx=0,!this.isHistoryModal()&&r.default.fire("filterchange",{card:0})):(a.classList.add("active"),this.currentCardIdx=t+1,i.removeActiveAttributeOnClass(t,this.currentMode,"#checkbutton"),!this.isHistoryModal()&&r.default.fire("filterchange",{card:t+1}))}}isHistoryModal(){return"historyModal"===this.mode}createPayMethod(){return`\n      <div id=${this.mode}>\n        ${this.createPayTitle()}\n        <div class='card-container' id=${this.mode}>\n          ${this.createCard()}\n        </div>\n      </div>`}createPayTitle(){return this.isHistoryModal()?"":"\n        <div class='pay-container'>\n         <span class='pay-text'>결제 수단</span>\n        </div>\n      "}createCard(){return this.state.map(((t,e)=>{let a="";return this.filter.card===e+1&&(a="active"),`\n            <div class='card ${n.objToChangeCardNameFromKoreanToEng[t.payMethodName]}' id='card' data-idx=${e}>\n              <div class='card-price'>\n                ${this.isHistoryModal()?"":`${t.payMethodMoney}`}\n              </div>\n\n              <div class='card-check ${a}' id='checkbutton'>\n                <img src=${o.CheckButton}>\n              </div>\n              \n             \n              <div class='card-name'>\n                ${t.payMethodName}\n              </div>\n            </div>\n          `})).join("")}}},23:(t,e,a)=>{Object.defineProperty(e,"__esModule",{value:!0}),a(940);const n=a(33);e.default=class{constructor(t){const e=n.createDOMWithSelector("div",".result-message-container"),a=n.createDOMWithSelector("div",".result-message");n.$("#root").appendChild(e),n.$(".result-message-container").appendChild(a),a.innerHTML=t,setTimeout((()=>{n.$("#root").removeChild(e)}),2500)}}},38:(t,e,a)=>{Object.defineProperty(e,"__esModule",{value:!0});const n=a(33),r=a(923),o=a(395),i=a(8);a(164);const s=a(6);e.default=class{constructor({parent:t,state:e,filter:a}){this.isIncomeButtonActive=!0,this.isExpenditureButtonActive=!0,this.isIncomeButtonSrc=i.CheckActive,this.isExpenditureButtonSrc=i.CheckActive,this.prevChoicedCategoryName="",this.prevChoicedDay="",this.history=n.createDOMWithSelector("div",".account-history"),t.appendChild(this.history),this.setProperty(e,a),this.render(),this.history.addEventListener("click",this.onClickHandler.bind(this)),this.history.addEventListener("focusout",this.onFoucsOutHandler.bind(this)),n.$("#root").addEventListener("click",this.onClickModalHandler.bind(this))}setProperty(t,e){this.state=t,this.filter=e,this.prevChoicedDay=e.day,this.prevChoicedCategoryId=e.category}render(){n.$(".account-history").innerHTML=`\n        ${this.createHistoryHeader()}\n        ${this.createHistoryContent()}\n        `}onFoucsOutHandler(t){const{target:e}=t;if(e instanceof HTMLElement&&"date__input"===e.className){let t=e.value;1===t.length&&(t="0"+t),r.default.fire("filterchange",{day:t})}}onClickHandler(t){const{target:e}=t;e instanceof HTMLElement&&(this.onClickAddButton(e),this.onClickCategoryItem(e),this.onClickDateButton(e),this.onClickTypeButton(e),this.onClickTrashCanImage(e),this.onClickCategoryName(e),this.onClickDateName(e))}onClickModalHandler(t){const{target:e}=t;e instanceof HTMLElement&&(this.onClickExceptCategoryArea(e),this.onClickExceptDateArea(e))}onClickExceptCategoryArea(t){"category-container active"!==t.className&&"account-history-table__category-span"!==t.className&&n.$(".category-container").classList.remove("active")}onClickExceptDateArea(t){["date-container active","account-history-table__date-span","date__specific-part","date__input-container active","date__specific","date__whole","date__fix-date","date__input-container active","date__input"].includes(t.className)||n.$(".date-container").classList.remove("active")}onClickCategoryName(t){"account-history-table__category-span"===t.className&&(n.$(".category-container").classList.contains("active")?n.$(".category-container").classList.remove("active"):n.$(".category-container").classList.add("active"))}onClickDateName(t){"account-history-table__date-span"===t.className&&n.$(".date-container").classList.add("active")}onClickTrashCanImage(t){"account-history-table__trashcan"===t.className&&new s.default({onClickConfirmWindowHandler:e=>this.onClickConfirmWindowHandler(e,t.dataset.id),addText:""})}onClickConfirmWindowHandler(t,e){const{target:a}=t;a instanceof HTMLElement&&("confirm__overlay"===a.className||"confirm__cancel"===a.className?n.$("#root").removeChild(n.$(".confirm")):"confirm__delete"===a.className&&(n.$("#root").removeChild(n.$(".confirm")),r.default.fire("deleteaboutaccount",{id:e})))}onClickTypeButton(t){const e=n.$(".account-history__income-img"),a=n.$(".account-history__expenditure-img");if("account-history__income-img"===t.className){e.src===i.CheckActive?(e.src=i.CheckNonActive,this.isIncomeButtonActive=!1):(e.src=i.CheckActive,this.isIncomeButtonActive=!0);const t=this.getType();r.default.fire("filterchange",{type:t})}else if("account-history__expenditure-img"===t.className){a.src===i.CheckActive?(a.src=i.CheckNonActive,this.isExpenditureButtonActive=!1):(a.src=i.CheckActive,this.isExpenditureButtonActive=!0);const t=this.getType();r.default.fire("filterchange",{type:t})}}getType(){return this.isIncomeButtonActive&&this.isExpenditureButtonActive?"":this.isIncomeButtonActive?"income":this.isExpenditureButtonActive?"expenditure":"not-choice"}onClickCategoryItem(t){if("category-list-img"===t.className){if(this.prevChoicedCategoryId===Number(t.dataset.id))return void r.default.fire("filterchange",{category:0});r.default.fire("filterchange",{category:Number(t.dataset.id)})}}onClickDateButton(t){this.onClickWholeDateButton(t),this.onClickSpecificDateButton(t)}onClickWholeDateButton(t){"date__whole-part"===t.className&&r.default.fire("filterchange",{day:""})}onClickSpecificDateButton(t){"date__specific-part"===t.className&&(this.changeButtonImage(),n.$(".date__input-container").classList.add("active"),n.$(".date__input").focus())}changeButtonImage(){const t=document.querySelector("#whole-date-img"),e=document.querySelector("#specific-date-img");t.src=i.CheckNonActive,e.src=i.CheckActive}onClickAddButton(t){"account-history__add"===t.className&&r.default.fire("createhistorymodal")}createHistoryHeader(){return this.checkTypeToChangeSrc(),`\n      <div class='account-history__header'>\n        <div class='account-history__header-left'>\n          <span class='account-history__text'>내역</span>\n          <span class='account-history__add'>+</span>\n        </div>\n        <div class='account-history__header-right'>\n          <div class='account-history__income'>\n            <img class='account-history__income-img' src= ${this.isIncomeButtonSrc}>\n            <span>수입 ${this.state.income}</span>\n          </div>\n          <div class='account-history__expenditure'>\n            <img class='account-history__expenditure-img' src= ${this.isExpenditureButtonSrc}>\n            <span >지출 ${this.state.expenditure}</span>\n          </div>\n          \n        </div>\n      </div>`}checkTypeToChangeSrc(){"income"===this.filter.type?(this.isIncomeButtonSrc=i.CheckActive,this.isExpenditureButtonSrc=i.CheckNonActive,this.isIncomeButtonActive=!0,this.isExpenditureButtonActive=!1):"expenditure"===this.filter.type?(this.isIncomeButtonSrc=i.CheckNonActive,this.isExpenditureButtonSrc=i.CheckActive,this.isIncomeButtonActive=!1,this.isExpenditureButtonActive=!0):""===this.filter.type?(this.isIncomeButtonSrc=i.CheckActive,this.isExpenditureButtonSrc=i.CheckActive,this.isIncomeButtonActive=!0,this.isExpenditureButtonActive=!0):"not-choice"===this.filter.type&&(this.isIncomeButtonSrc=i.CheckNonActive,this.isExpenditureButtonSrc=i.CheckNonActive,this.isIncomeButtonActive=!1,this.isExpenditureButtonActive=!1)}createHistoryContent(){return`\n      <table class='account-history-table'>\n        ${this.createTableHeader()}\n        ${this.createTableContent()}\n      </table>`}createTableHeader(){return`\n      <thead>\n        <tr class='account-history-table__header'>\n          <th class='account-history-table__content'>거래 내용</th>\n          <th class='account-history-table__category'><span class='account-history-table__category-span'>카테고리</span>${this.createCategoryChoiceBar()}</th>\n          <th class='account-history-table__date'><span class='account-history-table__date-span'>날짜</span>${this.createDateChoiceBar()}</th>\n          <th class='account-history-table__price'>금액</th>\n        </tr>\n      </thead>`}createDateChoiceBar(){return`\n      <div class="date-container">\n        ${this.createWholeDateChoice()}\n        ${this.createSpecificDateChoice()}\n        <div>\n        </div>\n      </div>\n    `}createWholeDateChoice(){let t="";return t=""===this.prevChoicedDay?i.CheckActive:i.CheckNonActive,`\n      <div class="date__whole">\n        <img class="date__whole-part" id='whole-date-img' src=${t}>\n        <span class="date__whole-part">전체</span>\n      </div>`}createSpecificDateChoice(){let t="",e="",a="";return""===this.prevChoicedDay?t=i.CheckNonActive:(t=i.CheckActive,e="active",a=this.prevChoicedDay),`\n      <div class="date__specific">\n        <div class="date__specific-container">\n          <img class="date__specific-part"  id='specific-date-img' src=${t}>\n          <span class="date__specific-part">특정 날짜 선택</span>\n        </div>\n\n        <div class="date__input-container ${e}">\n          ${this.createFixedDate()}\n          <input class="date__input" type='text' maxlength=2 value=${a}>\n        </div>\n      </div>\n    `}createFixedDate(){return`\n      <span class="date__fix-date">${history.state.year}.${this.zeroFill()}${history.state.month}.</span>\n    `}zeroFill(){if(history.state.month<10)return"0"}createCategoryChoiceBar(){return`\n      <div class="category-container">\n       ${this.createCategoryList()}\n      </div>\n    `}createCategoryList(){return o.categoryList.map(((t,e)=>{let a="";return this.prevChoicedCategoryId===e+1&&(a="active"),`\n            <div class="category-list ${a}">\n                <img class="category-list-img" src=${o.matchCategoryAndImg[t]} data-id=${e+1}>\n            </div>\n        `})).join("")}createTableContent(){return`\n      <tbody>\n        ${this.createContentDetail()}\n      </tbody>`}createContentDetail(){return this.state.detail.map((t=>`\n            <tr class='account-history-table_row'>\n                <td>\n                    <div class='account-history-table__content-container'>\n                        <img src=${o.matchCategoryAndImg[t.category]}>\n                        <div class='account-history-table__content-detail'>\n                            <span class='account-history-table__content-span'>${t.content}</span>\n                            <span class='account-history-table__content-pay'>${t.payMethod}</span>\n                        </div>\n                    </div>\n                </td>\n                <td>\n                    <span class='account-history-table__content-category'>${t.category}</span>\n                </td>\n                <td>\n                    <span class='account-history-table__content-createdAt'>${t.createdAt}</span>\n                </td>\n                <td>\n                    <span class='account-history-table__content-price'>${t.price}</span>\n                </td>\n                <td>\n                    <img class='account-history-table__trashcan' src=${i.TrashCan} data-id=${t.id}></img>\n\n                </td>\n            </tr>\n        `)).join("")}}},984:(t,e,a)=>{Object.defineProperty(e,"__esModule",{value:!0});const n=a(33),r=a(923),o=a(395),i=a(600),s=a(23);a(733),e.default=class{constructor(){this.choicedCategoryIndex=0,this.dateValueValidation=!1,this.moneyValueValidation=!1,this.choicedCategoryName="",this.type="",r.default.subscribe("createhistorymodal",(t=>{this.modalWrapper=n.createDOMWithSelector("div",".account-history-wrapper"),this.render();const e=n.$(".history-form__pay-method");this.dateInput=n.$(".history-form__date"),this.moneyInput=n.$(".history-form__money"),this.payMethod=new i.default({parent:e,state:o.CardsForModal,filter:{}}),this.modalWrapper.addEventListener("click",this.onClickHandler.bind(this)),this.modalWrapper.addEventListener("keyup",this.onKeyUpHandler.bind(this)),this.modalWrapper.addEventListener("focusout",this.onFocusOutInputHandler.bind(this)),this.modalWrapper.addEventListener("focusin",this.onFocusInInputHandler.bind(this))}))}render(){this.modalWrapper.innerHTML=this.createModal(),n.$("#root").appendChild(this.modalWrapper)}onClickHandler(t){this.onClickCategory(t),this.onClickOverlay(t),this.onClickSubmitButton(t)}onClickOverlay(t){const{target:e}=t;e instanceof HTMLElement&&"overlay"===e.className&&this.closeModal()}onClickCategory(t){const{target:e}=t;if(e instanceof HTMLElement&&"category-item"===e.className){const t=document.querySelectorAll(".history-form__category-list"),a=Number(e.dataset.idx),r=t[a];r.classList.contains("active")?(r.classList.remove("active"),this.choicedCategoryName=""):(r.classList.add("active"),this.choicedCategoryName=e.innerText,n.removeActiveAttributeOnClass(a,document,".history-form__category-list"))}}onClickSubmitButton(t){const{target:e}=t;e instanceof HTMLElement&&"history-form__confirm"===e.className&&(t.preventDefault(),this.checkAllValidation())}checkAllValidation(){const t=document.querySelector(".history-form__content");if(this.payMethod.currentCardIdx>0&&this.dateValueValidation&&this.moneyValueValidation&&this.choicedCategoryName.length>0&&t.value.length>0){this.checkIncomeOrExpenditure();const e=o.objToChangeCategoryNameFromKoreanToEng[this.choicedCategoryName],a=o.objToChangeCategoryEnglishNameToNum[e],n=this.changeSign(this.dateInput.value),i=this.changeToNum(this.moneyInput.value),c={payMethodId:this.payMethod.currentCardIdx,categoryId:a+1,price:i,expenditureDay:n,historyContent:t.value,type:this.type};this.closeModal(),new s.default("내역이 추가되었습니다."),r.default.fire("createaccounthistory",{state:history.state,submitArguments:c})}else this.showAlert(".history-form__confirm-alert")}changeSign(t){return t.replace(/[.]/g,"-")}checkIncomeOrExpenditure(){"수입"===this.choicedCategoryName?this.type="income":(this.type="expenditure",this.moneyInput.value="-"+this.moneyInput.value)}onFocusOutInputHandler(t){const{target:e}=t;e instanceof HTMLElement&&("history-form__date"===e.className?this.onFocusOutDateInputHandler():"history-form__money"===e.className&&this.onFocusOutMoneyInputHandler())}onFocusOutDateInputHandler(){this.onFocusOutDate()}onFocusOutMoneyInputHandler(){this.onFocusOutMoney()}onFocusOutDate(){const t=n.$(".history-form__date"),e=this.checkDateInputLengthValidation(t,8),a=this.checkDateInputValueValidation(t);e||a?(this.showAlert(".date-alert"),this.dateValueValidation=!1):this.dateValueValidation=!0,this.formatDateValue()}formatDateValue(){const t=this.dateInput.value,e=t.split("");t.length>6?(e.splice(4,0,"."),e.splice(7,0,"."),this.dateInput.value=e.join("")):t.length>4&&(e.splice(4,0,"."),this.dateInput.value=e.join(""))}onFocusOutMoney(){const t=n.$(".history-form__money");this.checkMoneyInputLengthValidation(t,0)?(this.showAlert(".money-alert"),this.moneyValueValidation=!1):this.moneyValueValidation=!0,this.formatMoneyValue()}formatMoneyValue(){const t=this.moneyInput.value,e=t.split(""),a=t.length;if(a>3){let t=1;for(let n=a-1;n>0;n--)t%3==0&&e.splice(n,0,","),t++}const n=e.join("");this.moneyInput.value=n}showAlert(t){n.$(t).classList.add("active"),setTimeout((()=>{n.$(t).classList.remove("active")}),2e3)}onFocusInInputHandler(t){const{target:e}=t;e instanceof HTMLElement&&("history-form__date"!==e.className&&"history-form__money"!==e.className||this.checkInputValueOnlyNumberRegex(e))}checkDateInputLengthValidation(t,e){return t.value.length!==e}checkDateInputValueValidation(t){if(8===t.value.length){const e=t.value.slice(0,4),a=t.value.slice(4,6),n=t.value.slice(6,8),r=new Date(e,a,0).getDate();return!(0<Number(a)&&13>Number(a)&&r>=Number(n)&&0<Number(n))}return!0}checkMoneyInputLengthValidation(t,e){return t.value.length===e}checkRegex(t,e){this.checkInputValueOnlyNumberRegex(t),this.checkInputMaxLengthRegex(t,e)}checkInputValueOnlyNumberRegex(t){t.value=t.value.replace(/[^0-9|]/g,"")}changeToNum(t){return t.replace(/[^0-9|]/g,"")}checkInputMaxLengthRegex(t,e){t.value=t.value.slice(0,e)}onKeyUpHandler(t){this.onKeyUpDate(t),this.onKeyUpMoney(t)}onKeyUpDate(t){const{target:e}=t;e instanceof HTMLInputElement&&"history-form__date"===e.className&&this.checkRegex(e,8)}onKeyUpMoney(t){const{target:e}=t;e instanceof HTMLInputElement&&"history-form__money"===e.className&&this.checkRegex(e,9)}closeModal(){n.$(".history-form").classList.add("hide"),setTimeout((()=>{n.$("#root").removeChild(this.modalWrapper)}),1300)}createModal(){return`\n        <div class="account-history-modal">\n            <div class="overlay"></div>\n            ${this.createForm()}\n        </div>\n      `}createForm(){return`\n      <div class="history-form">\n        <form>\n            <div class="history-form__date-money-container">\n                ${this.createDateForm()}\n                ${this.createMoneyForm()}\n            </div>\n            <div class="history-form__content-container">\n                ${this.createContentForm()}\n            </div>\n            ${this.createPayMethodForm()}\n            ${this.createCategoryForm()}\n            ${this.createConfirmButton()}\n        </form> \n      </div>\n    `}createDateForm(){return'\n     <div class="history-form__date-container">\n        <span>일자</span>\n        <input placeholder=\'ex> 20210101\' class="history-form__date" type="text" />\n        <span class=\'date-alert\'>유효한 날짜를 입력해주시기 바랍니다❗️</span>\n    </div>\n    '}createMoneyForm(){return'\n      <div class="history-form__money-container">\n        <span>금액</span>\n        <input class="history-form__money" type="text" />\n        <span class=\'Won\'>₩</span>\n        <span class=\'money-alert\'>금액를 입력해주시기 바랍니다❗️</span>\n      </div>\n      '}createContentForm(){return"\n        <span>내용</span>\n        <input class=\"history-form__content\" placeholder='최대 20자까지  작성가능합니다.' type=\"text\" maxlength='20' />\n    "}createPayMethodForm(){return'\n        <div class="history-form__pay-method"><span class="history-form__pay-method-title">결제 수단</span></div>\n    '}createCategoryForm(){return`\n      <div class="history-form__category">\n        <span>분류</span>\n        <div class="history-form__category-container">\n            ${this.createCategoryList()}\n        </div>\n      </div>\n    `}createCategoryList(){return o.categoryList.map(((t,e)=>`\n            <div class="history-form__category-list">\n                <img  src=${o.matchCategoryAndImg[t]}>\n                <span class='category-item' data-idx=${e} >${t}</span>\n            </div>\n        `)).join("")}createConfirmButton(){return'\n        <div class="history-form__confirm-container" >\n            <button class="history-form__confirm" >등록하기</button>\n            <span class=\'history-form__confirm-alert\'>❗️모든 값을 제대로 입력해주셔야 합니다❗️</span>\n        </div>\n      '}}},597:(t,e,a)=>{Object.defineProperty(e,"__esModule",{value:!0});const n=a(33);a(924),e.default=class{constructor({parent:t,state:e}){const a=n.createDOMWithSelector("div",".account__balance-container");t.appendChild(a),this.setProperty(e),this.render()}setProperty(t){this.state=t}render(){n.$(".account__balance-container").innerHTML=`\n        ${this.createMyBalance()}`}createMyBalance(){return`\n        <span class='account__balance-text'>현재 잔고</span>\n        <span class='account__balance'>${this.state}</span> \n    `}}},973:function(t,e,a){var n=this&&this.__awaiter||function(t,e,a,n){return new(a||(a=Promise))((function(r,o){function i(t){try{c(n.next(t))}catch(t){o(t)}}function s(t){try{c(n.throw(t))}catch(t){o(t)}}function c(t){var e;t.done?r(t.value):(e=t.value,e instanceof a?e:new a((function(t){t(e)}))).then(i,s)}c((n=n.apply(t,e||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0});const r=a(600),o=a(923),i=a(33),s=a(983);a(219);const c=a(38),d=a(597),l=a(395);e.default=class{constructor(){this.state={balance:"",payMethods:[],accountHistory:l.initHistoryData,filter:l.initFilterData},o.default.subscribe("storeupdated",(t=>n(this,void 0,void 0,(function*(){if("/account"!==t.detail.state.path)return;yield this.setProperty(t);const e=i.createDOMWithSelector("div",".account");i.$(".content-wrap").innerHTML="",i.$(".content-wrap").appendChild(e),new d.default({parent:e,state:this.state.balance}),new r.default({parent:e,state:this.state.payMethods,filter:this.state.filter}),new c.default({parent:e,state:this.state.accountHistory,filter:this.state.filter})}))))}setProperty(t){return n(this,void 0,void 0,(function*(){const e=t.detail.state.accessToken,a=t.detail.state.year;let n=t.detail.state.month;n<10&&(n="0"+n.toString());const r=`${a}-${n}`;t.detail.filter&&(this.state.filter=t.detail.filter);let o="";o=this.setQueryString(o,r);const i=yield s.api.get(`/account-history?${o}`,e),c=yield s.api.get(`/account-history?expenditureDay=${r}`,e);if(i.success&&c.success){const t=i.data.accountHistory,e=c.data.accountHistory;this.makeBalance(e),this.makePayMethodInfo(e),this.makeAccountHistoryInfo(t)}else alert(i.message)}))}setQueryString(t,e){return this.state.filter.card&&(t+=`payMethodId=${this.state.filter.card}&`),this.state.filter.category&&(t+=`categoryId=${this.state.filter.category}&`),this.state.filter.type&&(t+=`type=${this.state.filter.type}&`),this.state.filter.day?t+=`expenditureDay=${e}-${this.state.filter.day}`:t+=`expenditureDay=${e}`,t}makeBalance(t){let e=0;e+=this.getTotalPriceByType(t);const a=e.toString(),n=a[0],r=a.slice(1),o=this.formatPrice(r,n," 원");this.state.balance=o}getTotalPriceByType(t){let e=0,a=0,n=0;t.forEach((t=>{"income"===t.type?(e+=t.price,a+=t.price):"expenditure"===t.type&&(e-=t.price,n-=t.price)}));const r=a.toString(),o=n.toString();let i=o;return"0"!==o&&(i=o.slice(1)),this.state.accountHistory.income=this.formatPrice(r,"","원"),this.state.accountHistory.expenditure=this.formatPrice(i,"","원"),e}formatPrice(t,e,a){const n=t.split(""),r=t.length;if(r>3){let t=1;for(let e=r-1;e>0;e--)t%3==0&&n.splice(e,0,","),t++}return e+n.join("")+a}makePayMethodInfo(t){const e={1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0};t.forEach((t=>{"income"===t.type?e[t.payMethodId]+=t.price:"expenditure"===t.type&&(e[t.payMethodId]-=t.price)})),this.setFormattedPriceOfEachPayMethodId(e);let a=[];for(let t in e)a.push(e[t]);let n=[];l.payMethodNameList.forEach(((t,e)=>{n.push({payMethodName:t,payMethodMoney:a[e]})})),this.state.payMethods=n}setFormattedPriceOfEachPayMethodId(t){for(let e in t){const a=t[e].toString();"-"===a[0]?t[e]=this.formatPrice(a.slice(1),"-₩",""):t[e]=this.formatPrice(a,"₩","")}}makeAccountHistoryInfo(t){let e=[];t.forEach((t=>{let a="",n="";a=this.getFormattedPrice(t),n=this.getFormattedDate(t),e.push({id:t.id,price:a,createdAt:n,category:l.categoryList[t.categoryId-1],payMethod:l.payMethodNameList[t.payMethodId-1],content:t.historyContent})})),this.state.accountHistory.detail=e.reverse()}getFormattedPrice(t){return"income"===t.type?this.formatPrice(t.price.toString(),"₩",""):"expenditure"===t.type?this.formatPrice(t.price.toString(),"-₩",""):void 0}getFormattedDate(t){const e=t.expenditureDay.slice(5,7),a=t.expenditureDay.slice(8);return`${Number(e)}월 ${a}일`}}},669:(t,e,a)=>{Object.defineProperty(e,"__esModule",{value:!0});const n=a(395),r=a(8),o=a(923),i=a(33);a(681),e.default=class{constructor({parent:t,currentYear:e,currentMonth:a,currentCalendarData:r}){this.getCategoryColorDOMs=t=>this.calendarData.dayData[t].containCategory.map((t=>`<div class='contain-category__color' style='background-color:${n.COLORS_BY_CATEGORY[t]}'></div>`)).join(""),this.calendarData=this.processServerDataIntoCalendarData(r),this.dayObj={year:e,month:a},this.$calendarTable=i.createDOMWithSelector("table",".calendar__table"),this.$totalMoney=i.createDOMWithSelector("div",".calendar__total-money"),t.appendChild(this.$calendarTable),t.appendChild(this.$totalMoney),this.render(),document.addEventListener("click",(t=>this.handleModal(t,this)))}handleModal(t,{dayObj:e,calendarData:a}){if(!(t.target instanceof HTMLElement))return;if(t.target.closest(".content__calendar__modal"))return;if(!t.target.closest(".contain-data"))return o.default.fire("opencalendarmodal",{command:"close"});const n=t.target.closest(".contain-data"),r=n.dataset.day,{year:s,month:c}=e,d={date:{year:s,month:c,date:r},dayData:a.dayData[`${s}-${i.formatDateAsTwoLetters(c)}-${i.formatDateAsTwoLetters(r)}`]},{top:l,left:h}=n.getBoundingClientRect();o.default.fire("opencalendarmodal",{command:"open",data:d,pos:{top:l,left:h}})}render(){this.$calendarTable.innerHTML=`\n      <thead>\n      ${this.getDayDOM()}\n      </thead>\n      <tbody>\n      ${this.getFullDateOnCalendarDOM(this.dayObj)}\n      </tbody>\n    `,this.$totalMoney.innerHTML=`\n      <div class='calendar__total-money--expenditure'>\n        <img src=${r.ExpenditureIcon} alt='expenditure'>\n        <span>${i.formatDataIntoWon(this.calendarData.totalExpenditure)}</span>\n      </div>\n      <div class='calendar__total-money--income'>\n        <img src=${r.IncomeIcon} alt='income'>\n        <span>${i.formatDataIntoWon(this.calendarData.totalIncome)}</span>\n      </div>\n    `}getDayDOM(){return"\n      <tr>\n        <td>SUN</td><td>MON</td><td>TUE</td>\n        <td>WED</td><td>THU</td><td>FRI</td><td>SAT</td>\n      </tr>\n    "}getFullDateOnCalendarDOM(t){const{year:e,month:a}=t,n=new Date(e,a-1,0).getDate(),r=new Date(e,a,0).getDate(),o=new Date(e,a-1,1).getDay(),i=this.getDayOffset(o),s=this.getCalendarWithOffset(i),c=this.getCalendar(s,n,r),d=this.getSplitedCalendar(c);return this.getCalendarDOM(d).join("")}getCalendarDOM(t){return t.reduce(((t,e)=>[...t,this.getWeekDOM(e)]),[])}getWeekDOM(t){const e=i.createDOMWithSelector("tr");return t.forEach((({day:t,isCurrentMonthDate:a})=>{const n=i.createDOMWithSelector("td");a||n.classList.add("not-current-month-date");const r=i.createDOMWithSelector("span");if(r.innerText=`${t}`,n.appendChild(r),a){n.setAttribute("data-day",t.toString());const{year:e,month:a}=this.dayObj,r=`${e}-${i.formatDateAsTwoLetters(a)}-${i.formatDateAsTwoLetters(t)}`;if(r in this.calendarData.dayData){n.classList.add("contain-data");const t=i.createDOMWithSelector("div",".contain-category"),e=this.getCategoryColorDOMs(r);t.innerHTML=e,n.appendChild(t)}}e.appendChild(n)})),e.outerHTML}getSplitedCalendar(t){const e=[];for(let a=0;a<t.length;a+=7)e.push(t.slice(a,a+7));return e}getCalendar(t,e,a){const n=t.findIndex((t=>0===t)),r=t.splice(0,n+1).reduce(((t,a)=>[...t,{day:a+e,isCurrentMonthDate:!1}]),[]),o=t.findIndex((t=>t===a)),i=t.splice(o+1).reduce(((t,e)=>[...t,{day:e-a,isCurrentMonthDate:!1}]),[]);return[...r,...t.reduce(((t,e)=>[...t,{day:e,isCurrentMonthDate:!0}]),[]),...i]}getCalendarWithOffset(t){return[...new Array(42).keys()].map((e=>e-t))}getDayOffset(t){return(6===t?0:t)-1}processServerDataIntoCalendarData(t){const e={dayData:{},totalIncome:0,totalExpenditure:0};return t.forEach((({price:t,historyContent:a,expenditureDay:n,category:{name:r}})=>{e.dayData[n]?(e.dayData[n].detail.push({price:t,category:r,historyContent:a}),e.dayData[n].containCategory.includes(r)||e.dayData[n].containCategory.push(r),"income"===r?e.dayData[n].dayTotalIncome+=t:e.dayData[n].dayTotalExpenditure+=t):e.dayData[n]={detail:[{price:t,category:r,historyContent:a}],containCategory:[r],dayTotalIncome:"income"===r?t:0,dayTotalExpenditure:"income"===r?0:t},"income"===r?e.totalIncome+=t:e.totalExpenditure+=t})),e}}},344:(t,e,a)=>{Object.defineProperty(e,"__esModule",{value:!0});const n=a(395),r=a(8),o=a(923),i=a(33);a(17),e.default=class{constructor({parent:t}){this.$CalendarModal=i.createDOMWithSelector("aside",".content__calendar__modal"),t.appendChild(this.$CalendarModal),o.default.subscribe("opencalendarmodal",(t=>{if(this.isModalOpened||"close"!==t.detail.command)return"close"===t.detail.command?this.closeModal():void("open"===t.detail.command&&(this.closeModal(),this.setModalPosition(t),this.openModal(t.detail.data)))}))}closeModal(){this.isModalOpened=!1,this.$CalendarModal.classList.remove("open")}openModal(t){this.isModalOpened=!0,this.data=t,this.$CalendarModal.classList.add("open"),this.render()}setModalPosition(t){const{top:e,left:a}=t.detail.pos;this.$CalendarModal.setAttribute("style",`top:${e-220}px;left:${a- -40}px`)}render(){const{date:t,dayData:e}=this.data,{date:a,month:n,year:r}=t;if(!e)return;const{detail:o,dayTotalExpenditure:i,dayTotalIncome:s}=e;this.$CalendarModal.innerHTML=`\n      <h2 class='modal__title'>${r}년 ${n}월 ${a}일</h2>\n      <div class='modal__total-history'>${this.getTotalHistoryDOM(i,s)}</div>\n      <div class='modal__detail-history'>${this.getDetailHistoryDOM(o)}</div>\n    `}getDetailHistoryDOM(t){return t.reduce(((t,e)=>[...t,this.createDetailHistory(e)]),[]).join("")}createDetailHistory(t){const{price:e,category:a,historyContent:r}=t,o=i.createDOMWithSelector("div",".detail-history"),s=i.createDOMWithSelector("img");s.setAttribute("src",n.PICTOGRAM[a]);const c=i.createDOMWithSelector("span");c.setAttribute("style",`color:${n.COLORS_BY_CATEGORY[a]}`),c.innerText=r;const d=i.createDOMWithSelector("span");return d.setAttribute("style","color:"+("income"===a?"#1289A7":"#E63950")),d.innerText=i.formatDataIntoWon(e),o.appendChild(s),o.appendChild(c),o.appendChild(d),o.outerHTML}getTotalHistoryDOM(t,e){return`\n      <div class='modal__total-history--expenditure'>\n        <img src=${r.ExpenditureIcon} alt='expenditure'>\n        <span>${i.formatDataIntoWon(t)}</span>\n      </div>\n      <div class='modal__total-history--income'>\n        <img src=${r.IncomeIcon} alt='income'>\n        <span>${i.formatDataIntoWon(e)}</span>\n      </div>\n    `}}},916:(t,e,a)=>{Object.defineProperty(e,"__esModule",{value:!0});const n=a(983),r=a(923),o=a(33);a(650);const i=a(669),s=a(344);a(650),e.default=class{constructor(){r.default.subscribe("storeupdated",(t=>{const{path:e,month:a,year:r,accessToken:o}=t.detail.state;if("/calendar"!==e)return;this.currentYear=r,this.currentMonth=a;const i=`/account-history?expenditureDay=${r}-${a.toString().padStart(2,"0")}`;n.api.get(i,o).then((t=>{t.success&&(this.currentCalendarData=t.data.accountHistory,this.render())}))}))}render(){o.$(".content-wrap").innerHTML="<div class='content__calendar'></div>",new i.default({parent:o.$(".content__calendar"),currentYear:this.currentYear,currentMonth:this.currentMonth,currentCalendarData:this.currentCalendarData}),new s.default({parent:o.$(".content__calendar")})}}},483:(t,e,a)=>{Object.defineProperty(e,"__esModule",{value:!0});const n=a(8),r=a(923),o=a(33);a(104),e.default=class{constructor(){r.default.subscribe("storeupdated",(t=>{"/"===t.detail.state.path&&(this.loginWrapper=o.createDOMWithSelector("div",".login"),o.$(".content-wrap").innerHTML="",o.$(".content-wrap").appendChild(this.loginWrapper),this.render(),this.loginWrapper.addEventListener("click",this.onClickLoginButtonHandler.bind(this)))}))}onClickLoginButtonHandler(t){const{target:e}=t;e instanceof HTMLElement&&e.closest(".login__button")&&r.default.fire("requestGithubLogin")}render(){this.loginWrapper.innerHTML=`\n      ${this.createLogo()}\n      ${this.createLeftPartInPage()}\n      ${this.createRightPartInPage()}\n    `}createLogo(){return`\n      <div class="login__logo">\n        <img src=${n.LoginLogo}> \n      </div>\n    `}createLeftPartInPage(){return`\n      <div class="login__left-part">\n        <img src=${n.LoginBg}>\n        <div class="login__guide">\n            <div>자신감 있게 돈을 관리해보세요.</div>\n        </div>\n        <div class="login__guide-detail">\n            <div>통찰력을 갖고 돈의 흐름을 통제해보세요. <br>여러 가지 도구들로 당신이 올바른 결정을 할 수 있도록 도와줍니다.</div>\n        </div>\n      </div>\n    `}createRightPartInPage(){return`\n      <div class="login__right-part">\n          <div class="login__welcome">\n            <div>Sign In<br> to <span class='highlight'>woowahan</span> ledger</div>\n          </div>\n          ${this.createLoginButton()}\n      </div>\n    `}createLoginButton(){return`\n      <div class="login__button-container">\n        <button class="login__button"> \n            <img src=${n.GithubIcon}>\n            <span>Sign up with Github</span>\n        </button>\n      </div>\n    `}}},732:(t,e,a)=>{Object.defineProperty(e,"__esModule",{value:!0});const n=a(983),r=a(395),o=a(923),i=a(33);a(541),e.default=class{constructor({parent:t,state:e,token:a}){this.$ExpenseByAllCategory=i.createDOMWithSelector("div",".expense-by-all-category"),t.appendChild(this.$ExpenseByAllCategory),this.categoryStatisticData=e,this.accessToken=a,n.api.get("/category",a).then((t=>{t.success&&(this.categoryInfos=t.data.payments.map((({id:t,name:e})=>({id:t,name:e}))),o.default.fire("changecategory",{category:this.categoryInfos[0]}))})),this.render(),this.$ExpenseByAllCategory.addEventListener("click",(t=>this.onClickPathElement(t,this)))}onClickPathElement(t,e){const a=t.target;if("path"!==a.tagName)return;const n=a.dataset.category,r=e.categoryInfos.find((({name:t})=>t===n));o.default.fire("changecategory",{category:r})}render(){this.$ExpenseByAllCategory.innerHTML=`\n        <span class='expense-by-all-category__title'>카테고리 별 지출</span>\n        <div class='expense-by-all-category__content'>\n          <div class='content__chart'>\n            <svg viewBox='-1.5 -1.5 3 3'>\n              ${this.getDoughnutChartPaths(this.categoryStatisticData)}\n            </svg>\n          </div>\n          <div class='content__summary'>\n            ${this.getCategorySummariesDOM(this.categoryStatisticData)}\n          </div>\n        <div>\n      `}getDoughnutChartPaths(t){let e=0;return t.map((({percent:t,category:a},n)=>{const[r,o]=this.getCoordinatesForPercent(e);e+=t;const[i,s]=this.getCoordinatesForPercent(e),c=t>.5?1:0;return this.getCategoryDataPath({percent:t,category:a},{startX:r,startY:o,endX:i,endY:s,isLargeArcFlag:c},n)})).join("")}getCategoryDataPath({percent:t,category:e},{startX:a,startY:n,endX:o,endY:i,isLargeArcFlag:s},c){const d=2*Math.PI*t,l=2*Math.PI*(1-t),h=document.createElementNS("http://www.w3.org/1999/svg","path");h.setAttribute("data-category",e),h.setAttribute("d",`M ${a} ${n} A 1 1 0 ${s} 1 ${o} ${i} L 0 0`),h.setAttribute("fill","none"),h.setAttribute("stroke-width","0.4"),h.setAttribute("stroke",`${r.COLORS_BY_CATEGORY[e]}`),h.setAttribute("stroke-dasharray",`${d} ${l}`),h.setAttribute("stroke-dashoffset",`${d}`);const u=document.createElementNS("http://www.w3.org/2000/svg","animate");return u.setAttribute("attributeName","stroke-dashoffset"),u.setAttribute("begin",""+.2*c),u.setAttribute("from",`${d}`),u.setAttribute("to","0.025"),u.setAttribute("dur","0.2"),u.setAttribute("fill","freeze"),h.appendChild(u),h.outerHTML}getCoordinatesForPercent(t){return[Math.cos(2*Math.PI*t),Math.sin(2*Math.PI*t)]}getCategorySummariesDOM(t){return t.map((t=>this.getCategorySummary(t))).join("")}getCategorySummary(t){return`\n      <div class='category-summary'>\n        <div class='category-summary__color' style='background-color: ${r.COLORS_BY_CATEGORY[t.category]}'></div>\n        <span class='category-summary__name'>${r.NAME_BY_CATEGORY[t.category]}</span>\n        <span class='category-summary__percent'>${(100*t.percent).toFixed(1)}%</span>\n      </div>\n    `}}},713:(t,e,a)=>{Object.defineProperty(e,"__esModule",{value:!0});const n=a(983),r=a(395),o=a(923),i=a(33);a(51),e.default=class{constructor({parent:t,year:e,month:a,token:r}){this.$ExpenseBySpecificCategory=i.createDOMWithSelector("div",".expense-by-category"),t.appendChild(this.$ExpenseBySpecificCategory),o.default.subscribe("changecategory",(t=>{this.categoryInfo=t.detail.category;const o=`/account-history?expenditureDay=${e}-${a.toString().padStart(2,"0")}&categoryId=${t.detail.category.id}`;n.api.get(o,r).then((t=>{t.success&&(this.data=this.processDataIntoExpenseBySpecificCategory(t.data.accountHistory),this.render())}))}))}processDataIntoExpenseBySpecificCategory(t){const e=[...new Array(31)].map((t=>0));return t.filter((({category:t})=>"income"!==t.name)).forEach((({expenditureDay:t,price:a})=>{const n=parseInt(t.split("-")[2]);e[n-1]+=a})),e}render(){this.$ExpenseBySpecificCategory.innerHTML=`\n        <span>${r.NAME_BY_CATEGORY[this.categoryInfo.name]} 카테고리 소비 추이</span>\n        <div class='expense-by-category__content'>\n          <div class='content__expense-delimiter'>\n            ${this.getExpenseDelimiterDOM(this.data)}\n          </div>\n          <svg class='content__curved-chart' xmlns='http://www.w3.org/2000/svg' viewBox='0 0 961 287'></svg>\n          <div class='content__day-delimiter'>\n            <span>5</span><span>10</span>\n            <span>15</span><span>20</span><span>25</span>\n          </div>\n        </div>\n      `,i.$(".content__curved-chart").innerHTML=this.getChartBaseLineDOM(),i.$(".content__curved-chart").appendChild(this.getCurvedChartPath())}getExpenseDelimiterDOM(t){return this.getHorizontalDataInterval(t).reverse().reduce(((t,e)=>[...t,`<span>₩${e}</span>`]),[]).join("")}getHorizontalDataInterval(t){const e=Math.max(...t),a=Math.min(...t),n=Math.floor((e-a)/4);return[...new Array(5).keys()].reduce(((t,r,o)=>0===o?[a]:4===o?[...t,e]:[...t,n*o]),[])}getChartBaseLineDOM(){const{height:t}=i.$(".content__curved-chart").getBoundingClientRect(),e=t/4;return[...new Array(5).keys()].reduce(((t,a,n)=>[...t,this.getBaseLineDOM(e*n)]),[]).join("")}getBaseLineDOM(t){const e=document.createElementNS("http://www.w3.org/2000/svg","line");return e.setAttribute("x1","0"),e.setAttribute("y1",`${t}`),e.setAttribute("x2","961"),e.setAttribute("y2",`${t}`),e.setAttribute("stroke","#9c9c9c"),e.setAttribute("stroke-opacity",".2"),e.outerHTML}getCurvedChartPath(){const t=document.createElementNS("http://www.w3.org/2000/svg","path");t.setAttribute("d",this.getPathDAttribute(this.data)),t.setAttribute("fill","none"),t.setAttribute("stroke","#5758BB"),t.setAttribute("stroke-width","3"),t.setAttribute("stroke-dasharray",`${t.getTotalLength()}`),t.setAttribute("style","transform: scaleY(0.87) translateY(34px)");const e=document.createElementNS("http://www.w3.org/2000/svg","animate");return e.setAttribute("attributeName","stroke-dashoffset"),e.setAttribute("from",`${t.getTotalLength()}`),e.setAttribute("to","0"),e.setAttribute("dur","1.5"),t.appendChild(e),t}getPathDAttribute(t){return this.getCoordinates(t).reduce(((t,e,a,n)=>{if(0===a)return`M ${e[0]},${e[1]}`;const[r,o]=this.getControlPoint(n[a-2],n[a-1],e),[i,s]=this.getControlPoint(n[a-1],e,n[a+1],!0);return`${t} C ${r}, ${o} ${i}, ${s} ${e[0]}, ${e[1]}`}),"")}getControlPoint(t,e,a,n){const r=t||e,o=a||e,i=this.getOpposedLine(r,o),s=i.angle+(n?Math.PI:0),c=.25*i.length;return[e[0]+Math.cos(s)*c,e[1]+Math.sin(s)*c]}getOpposedLine(t,e){const a=e[0]-t[0],n=e[1]-t[1];return{length:Math.sqrt(Math.pow(a,2)+Math.pow(n,2)),angle:Math.atan2(n,a)}}getCoordinates(t){const{width:e,height:a}=i.$(".content__curved-chart").getBoundingClientRect(),n=e/30,r=Math.max(...t);return t.reduce(((t,e,o)=>[...t,[o*n,e/r*a]]),[])}}},932:(t,e,a)=>{Object.defineProperty(e,"__esModule",{value:!0});const n=a(395),r=a(33);a(67),e.default=class{constructor({parent:t,state:e}){this.getRecentlyAccountsDOM=t=>t.map((t=>this.RecentlyAccount(t))).join(""),this.$recentlyAccountHistory=r.createDOMWithSelector("div",".recently-account-history"),this.recentlyAccountHistoryList=e,t.appendChild(this.$recentlyAccountHistory),this.render()}render(){this.$recentlyAccountHistory.innerHTML=`\n        <span class='recently-account-history__title'>최근 가계부 내역</span>\n        <div class='recently-account-wrap'>\n          ${this.getRecentlyAccountsDOM(this.recentlyAccountHistoryList)}\n        </div>\n    `}RecentlyAccount(t){const{category:e,historyContent:a,price:r,type:o,expenditureDay:i}=t,[s,c,d]=i.split("-");return`\n      <div class='recently-account'>\n        <img src=${n.PICTOGRAM[e.name]}>\n          <div>\n            <span class='recently-account__title'>${a}</span>\n            <span class='recently-account__date'>${s}년 ${c}월 ${d}일</span>\n            </div>\n            ${this.getFormattedMoneySpan(r,"income"===o)}\n            </div>\n            `}getFormattedMoneySpan(t,e){return`\n      <span class='recently-account__amount'>\n          ${e?"":"-"}\n          ${r.formatDataIntoWon(t)}\n      </span>\n    `}}},808:(t,e,a)=>{Object.defineProperty(e,"__esModule",{value:!0});const n=a(923),r=a(33);a(741);const o=a(932),i=a(732),s=a(713),c=a(983);e.default=class{constructor(){this.store={expenseByAllCategory:[],recentlyAccountData:[],expenseBySpecificCategory:[]},this.userCategoryInfos=[],n.default.subscribe("storeupdated",(t=>{const{path:e,month:a,year:n,accessToken:r}=t.detail.state;if("/statistics"!==e)return;this.accessToken=r,this.year=n,this.month=a;const o=`/account-history?expenditureDay=${n}-${a.toString().padStart(2,"0")}`;c.api.get(o,r).then((t=>{t.success&&(this.processServerDataIntoStatisticsData(t.data.accountHistory),this.render())}))}))}processServerDataIntoStatisticsData(t){const e=this.processDataIntoExpenseByAllCategory(t),a=this.processDataIntoRecentlyAccountData(t);this.store.expenseByAllCategory=e,this.store.recentlyAccountData=a}processDataIntoExpenseByAllCategory(t){const e={},a=t.filter((({category:t})=>"income"!==t.name));return a.forEach((({category:t})=>{if(!(t.name in e))return e[t.name]=1;e[t.name]++})),Object.entries(e).map((([t,e])=>({category:t,percent:Number((e/a.length).toFixed(6))})))}processDataIntoRecentlyAccountData(t){return t.sort(((t,e)=>parseInt(e.expenditureDay.split("-")[2])-parseInt(t.expenditureDay.split("-")[2]))).slice(0,3)}processDataIntoExpenseBySpecificCategory(t){const e=[...new Array(31)].map((t=>0));return t.filter((({category:t})=>"income"!==t.name)).forEach((({expenditureDay:t,price:a})=>{const n=parseInt(t.split("-")[2]);e[n-1]+=a})),e}onClickDetailAccount(t){if(t.preventDefault(),!(t.target instanceof HTMLElement))return;const e=t.target.getAttribute("href");n.default.fire("statechange",Object.assign(Object.assign({},history.state),{path:e}))}render(){r.$(".content-wrap").innerHTML="<div class='content__statistics'></div>",new i.default({parent:r.$(".content__statistics"),state:this.store.expenseByAllCategory,token:this.accessToken}),new o.default({parent:r.$(".content__statistics"),state:this.store.recentlyAccountData}),new s.default({parent:r.$(".content__statistics"),year:this.year,month:this.month,token:this.accessToken})}}}},e={};function a(n){var r=e[n];if(void 0!==r)return r.exports;var o=e[n]={exports:{}};return t[n].call(o.exports,o,o.exports,a),o.exports}a.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},(()=>{var t;a(965);const e=a(554),n=a(682),r=a(923),o=a(33),i=a(395);if(new e.default,new n.default,o.getValueOnLocalStorage("refreshToken")&&o.getValueOnLocalStorage("refreshToken"),window.location.search){const[t,e]=window.location.search.split("?")[1].split("&");o.setValueOnLocalStorage("refreshToken",e.split("=")[1]),(t=>{r.default.fire("statechange",Object.assign(Object.assign({},i.newStoreData),{accessToken:t}))})(t.split("=")[1])}r.default.fire("statechange",null!==(t=history.state)&&void 0!==t?t:i.initStoreData)})()})();
//# sourceMappingURL=index.bundle.js.map